---
- name: apt-get clean
  become: true
  become_user: "{{ root_user }}"
  command: sudo apt-get clean

- name: wipe apt lists
  become: true
  become_user: "{{ root_user }}"
  shell: "rm -rf /var/lib/apt/lists/*"

- name: wipe user cache
  file:
    state: absent
    path: "~/.cache"

- name: wipe root cache
  become: true
  become_user: "{{ root_user }}"
  file:
    state: absent
    path: "~/.cache"


# see https://askubuntu.com/questions/846704/changing-gsettings-for-another-user-from-an-ansible-script-started-by-vagrant/967632
- name: set icons/applications (with Firefox)
  dconf:
    key: /org/gnome/shell/favorite-apps
    value: "{{ ubuntu_desktop_launcher_favorites_firefox }}"
    state: present
  when: ubuntu_desktop_browser == 'firefox'

- name: set icons/applications (with Chromium)
  dconf:
    key: /org/gnome/shell/favorite-apps
    value: "{{ ubuntu_desktop_launcher_favorites_chromium }}"
    state: present
  when: ubuntu_desktop_browser == 'chromium-browser'
